{% import_yaml 'ssh/defaults.yaml' as defaults %}
{% import_yaml 'ssh/os_family_map.yaml' as os_family_map %}
{% import_yaml 'ssh/oscodename_map.yaml' as oscodename_map %}

{% set default_settings = salt['grains.filter_by'](
    defaults,
    merge=salt['grains.filter_by'](
        os_family_map,
        grain='os_family',
        merge=salt['grains.filter_by'](
            oscodename_map,
            grain='oscodename',
            merge=salt['pillar.get']('ssh:lookup')
        ),
    ),
    base='ssh'
) %}

{% set ssh = salt['pillar.get'](
  'ssh',
  default=default_settings,
  merge=True)
%}
