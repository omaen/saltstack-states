{% import_yaml 'unattended-upgrades/defaults.yaml' as defaults %}

{% set lookup = salt['grains.filter_by']({
    'Debian': {
      'unattended_upgrades_config': '/etc/apt/apt.conf.d/50unattended-upgrades',
      'listchanges_config': '/etc/apt/listchanges.conf',
      'auto_upgrades_config': '/etc/apt/apt.conf.d/20auto-upgrades'
    },
  },
  grain='os_family',
  merge=salt['pillar.get']('unattended_upgrades:lookup'))
%}

{% do defaults.unattended_upgrades.update(lookup) %}

{% set unattended_upgrades = salt['pillar.get'](
  'unattended_upgrades',
  default=defaults.unattended_upgrades,
  merge=True)
%}
